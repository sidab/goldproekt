<template>

    <div class="page">

        <div class="navbar">

            <div class="navbar-inner sliding">

                <div class="title">Наш бетонный завод</div>

            </div>

        </div>

        <div class="fab fab-extended fab-center-bottom">

            <a @click="call" href="#">
                <i class="icon f7-icons ios-only">phone</i>
                <i class="icon material-icons md-only">phone</i>
                <div class="fab-text">Позвонить</div>
            </a>

        </div>

        <div class="page-content">

            <div class="swiper-container beton-slider">

                <div class="swiper-wrapper">

                    <div class="swiper-slide">

                        <iframe data-src="https://www.youtube.com/embed/9Y-NAOpdGeE?modestbranding=1&rel=0&autohide=1&showinfo=0" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

                    </div>

                    <div class="swiper-slide">

                        <img data-index="0" src="img/beton/1.jpg" width="100%">

                    </div>

                    <div class="swiper-slide">

                        <img data-index="1" src="img/beton/2.jpg" width="100%">

                    </div>

                    <div class="swiper-slide">

                        <img data-index="2" src="img/beton/3.jpg" width="100%">

                    </div>

                    <div class="swiper-slide">

                        <img data-index="3" src="img/beton/4.jpg" width="100%">

                    </div>

                    <div class="swiper-slide">

                        <img data-index="4" src="img/beton/5.jpg" width="100%">

                    </div>

                    <div class="swiper-slide">

                        <img data-index="5" src="img/beton/6.jpg" width="100%">

                    </div>

                    <div class="swiper-slide">

                        <img data-index="6" src="img/beton/7.jpg" width="100%">

                    </div>

                    <div class="swiper-slide">

                        <img data-index="7" src="img/beton/8.jpg" width="100%">

                    </div>

                </div>

                <div class="swiper-pagination text-color-white"></div>

                <div class="segmented segmented-raised segmented-round margin-vertical">

                    <button class="button button-round button-outline prev">Предыдущее</button>
                    <button class="button button-round button-outline next">Следующее</button>

                </div>

            </div>

            <small class="display-block text-align-center text-color-gray">Нажмите на фото для увелечения</small>

            <div class="block-title block-title-medium">Цены на бетон компании «Голд Проект»</div>

            <div class="block block-strong">В таблице представлены актуальные цены на разные марки бетона. При заказе большого количества возможно предоставление индивидуальной скидки!</div>

            <div class="data-table card">

                <table>

                    <thead>

                    <tr>

                        <th class="label-cell">Марка</th>
                        <th class="numeric-cell">Цена</th>

                    </tr>

                    </thead>

                    <tbody>

                    <tr>

                        <td class="label-cell">М-100</td>
                        <td class="numeric-cell">2300₽</td>

                    </tr>

                    <tr>

                        <td class="label-cell">М-150</td>
                        <td class="numeric-cell">2500₽</td>

                    </tr>

                    <tr>

                        <td class="label-cell">М-200</td>
                        <td class="numeric-cell">2700₽</td>

                    </tr>

                    <tr>

                        <td class="label-cell">М-250</td>
                        <td class="numeric-cell">2900₽</td>

                    </tr>

                    <tr>

                        <td class="label-cell">М-300</td>
                        <td class="numeric-cell">3100₽</td>

                    </tr>

                    <tr>

                        <td class="label-cell">М-350</td>
                        <td class="numeric-cell">3300₽</td>

                    </tr>

                    <tr>

                        <td class="label-cell">М-400</td>
                        <td class="numeric-cell">3500₽</td>

                    </tr>

                    </tbody>

                </table>

            </div>

            <div class="block-title block-title-medium">Бетононасос</div>

            <div class="block block-strong">Можно заказать бетононасос со стрелой 58 м.</div>

            <div class="block-title block-title-medium"><h3>4 причины, из-за которых стоит приобрести бетон в компании «Голд Проект»</h3></div>

            <div class="block block-strong">

                <ul>

                    <li>Тщательный контроль качества. Представленные марки бетона соответствуют требованиям ГОСТ и СНиП.</li>
                    <li>Собственный автопарк спецтеники. Можно заказать бетононасос со стрелой 58 м.</li>
                    <li>Всесторонняя помощь. Сотрудники компании предоставляют бесплатные технические консультации, помогая клиентам подобрать бетон, соответствующий требованиям их проекта.</li>
                    <li>Лояльная ценовая политика. Компания «Голд Проект» дает гарантию доступных цен, предлагает клиентам скидки и большое количество бесплатных услуг: консультации, расчет стоимости и иные.</li>

                </ul>

            </div>

            <div class="block block-strong">Вы можете заказать бетон и бетононасос в любое удобное время, связавшись с нами по телефону: <strong><a class="external" href="tel:+79887756000">8(988) 775-60-00</a></strong></div>

        </div>

    </div>

</template>

<style scoped>

    {{this}} .beton-slider .swiper-pagination {
        text-shadow: -1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000;
    }

    {{this}} .beton-slider .swiper-pagination {
                 position: relative;
                 bottom: 0px;
             }

    {{this}} .beton-slider {
                 max-width: 750px;
        margin: 0 auto
             }

</style>

<script>

    return {

        data: function () {

            return {

            }

        },
        methods: {

            call: function() {

                window.open('tel:+79887756000', '_system');

            },
            resizeIframe: function () {

                var page = this.$el;

                var pageContentWidth = page.find('.page-content').width();

                if (pageContentWidth > 750) {

                    pageContentWidth = pageContentWidth / 2;

                }

                var iframeHeight = +pageContentWidth - (pageContentWidth / 3) +'px';
                var iframeBlockHeight = +pageContentWidth - (pageContentWidth / 2) +'px';

                page.find('iframe').css('height', iframeHeight);

                page.find('iframe').parent().css('min-height', iframeBlockHeight);

                page.find('iframe').on('load', function() {

                    $$(this).removeClass('display-none');
                    $$(this).prev().hide();

                });

                setTimeout(function() {

                    page.find('iframe').removeClass('display-none');
                    page.find('iframe').prev().hide();

                }, 5000);

            }

        },
        on: {
            pageInit: function() {

                var component = this;
                var page = component.$el;

                $$('#view-beton').once('tab:show', function () {

                    var src = page.find('iframe').data('src');

                    page.find('iframe').attr('src', src);

                    component.resizeIframe();

                    var betonSlider = new Swiper(page.find('.beton-slider'), {
                        effect: 'coverflow',
                        pagination: {
                            el: '.swiper-pagination',
                            type: 'fraction'
                        },
                        navigation: {
                            nextEl: '.next',
                            prevEl: '.prev',
                            disabledClass: 'disabled',
                            hiddenClass: 'disabled'
                        },
                        on: {
                            init: function() {

                                var swiper = this.$el;
                                var images = [];

                                swiper.find('img').each(function () {

                                    var src = $$(this).attr('src');

                                    images.push(src);

                                });

                                var photoBrowser = app.photoBrowser.create({
                                    photos: images,
                                    theme: 'dark',
                                    routableModals: false,
                                    swiper: {
                                        zoom: {
                                            maxRatio: 10
                                        }
                                    }
                                });

                                swiper.find('img').on('click', function() {

                                    var index = parseInt($$(this).data('index'));

                                    photoBrowser.open(index);

                                });

                            }
                        }
                    });

                });

            }

        }

    }

</script>